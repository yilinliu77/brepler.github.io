<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>B-repLer: Language-guided Editing of CAD Models</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="style.css">
    <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
</head>

<body>
    <div class="page">

        <!-- HERO CARD -->
        <header class="hero">
            <div class="hero-card">
                <h1><em>B-repLer</em>: Language-guided Editing of CAD Models</h1>

                <p class="authors">
                    <span class="author">Yilin Liu<sup>1</sup></span>
                    <span class="author">Niladri Shekhar Dutt<sup>1</sup></span>
                    <span class="author">Changjian Li<sup>2</sup></span>
                    <span class="author">Niloy Mitra<sup>1,3</sup></span>
                </p>

                <p class="affiliations">
                    <span class="affiliation"><sup>1</sup>University College London</span>
                    <span class="affiliation"><sup>2</sup>University of Edinburgh</span>
                    <span class="affiliation"><sup>3</sup>Adobe Research</span>
                </p>
            </div>
        </header>

        <main>
            <section class="section">
                <figure class="paper-teaser">
                    <img src="assets/teaser.jpg" alt="Teaser figure: [short description]">
                    <figcaption class="teaser-caption">Figure 1: We present <strong><emph>B-rep L</emph></strong>atent <strong><emph>E</emph></strong>dito<strong><emph>r</emph></strong> (<em>B-repLer</em>), the first framework to perform generative CAD editing directly in the Boundary Representation (B-rep), without the need for the construction history. Our method can interpret high-level user instructions (in orange) to perform fine-grained modifications on B-rep models with complex and freeform geometries. By operating in the B-rep latent space, <em>B-repLer</em> generates a diverse set of valid B-rep edits from a single fixed input (left). It also supports multi-edit for complex freeform surfaces and functional descriptions, while preserving identities in unchanged areas (right).
                    </figcaption>
                </figure>
            </section>
            <!-- ABSTRACT -->
            <section class="section">
                <h2>Abstract</h2>
                <p>
                    Computer-Aided Design (CAD) models, given their compactness and precision, remain the industry standard for designing and fabricating engineering objects. However, language-guided CAD editing is still in its infancy, largely due to missing semantic connection between user commands and underlying shape geometry, a problem exacerbated by the shortage of paired text-and-edit CAD datasets. While recent Multimodal Large Language Models (mLLMs) have attempted to bridge this gap, their reliance on CAD construction history -often an expensive and hard to obtain input- severely limits their expressiveness and restricts their usage.
                </p>
                <p>
                    We present <em>B-repLer</em>, a novel framework that directly connects natural language with editing CAD models by operating in a learned latent space. Importantly, our approach bypasses the need for construction history, enabling semantic edits on a wide range of geometries, from simple prismatic parts to complex freeform shapes defined by B-Spline surfaces. To facilitate this research, we introduce <em>BrepEDIT-240K</em>, the first large-scale dataset for this task. We demonstrate how this paired dataset can be automatically generated, (user) validated, and scaled by leveraging existing CAD tools, in conjunction with mLLMs, to create the required paired data without relying on any external annotations. Our results demonstrate that B-repLer can accurately perform complex edits on complex CAD shapes, even when the input edit specifications are high-level and ambiguous to interpret, consistently producing valid, high-quality CAD outputs enabling a class of text-guided edits not previously possible.
                </p>
            </section>

            <section id="method" class="section">
                <h2>Method</h2>
                    <div class="method-figure">
                        <img src="assets/overview.png" alt="Method overview figure">
                        <p class="teaser-caption">
                            Figure 2: We process the input B-rep model and user prompt using a pre-trained mLLM and a B-rep encoder to extract visual, textual, and B-rep features. These features are fused by a transformer encoder. Subsequently, a decoder autoregressively attends to the fused features to produce a target embedding, which conditions a flow matching network to generate the edited B-rep CAD model.
                        </p>
                    </div>
            </section>

            <section id="method" class="section">
                <h2>Dataset</h2>
                <div class="method-figure">
                    <img src="assets/dataset_motivation.jpg" alt="Dataset motivation figure">
                    <p class="teaser-caption">
                        Figure 3: Existing datasets, such as CADEditor, are often limited by the sketch-and-extrude pipeline and typically contain only single-extrusion data sequences, resulting in limited data variety. In contrast, <em>BrepEDIT-240K</em> directly models the B-rep, thus supporting complex geometry, and providing rich, multi-level annotations.
                    </p>
                </div>
            </section>

            <section id="results" class="section">
                <h2>Multi-edit results (interactable)</h2>
                <div class="multi-edit">
                    <div class="multi-edit-prompts">
                        <div class="prompt-card">
                            <p class="prompt-caption">Prompt 1: Add an internal cave to the model</p>
                        </div>
                        <div class="prompt-card">
                            <p class="prompt-caption">Prompt 2: Modify the top face for mounting purposes</p>
                        </div>
                    </div>

                    <div class="multi-edit-models">
                        <div class="edit-step">
                            <model-viewer id="multi-edit-initial" src="1" alt="Initial CAD model" camera-controls camera-orbit="60deg 60deg 5m"
                                style="width: 100%; height: 160px; background: #FFFFFF;">
                            </model-viewer>
                            <p class="edit-caption">Initial model</p>
                        </div>
                        <div class="flow-arrow" aria-hidden="true">→</div>
                        <div class="edit-step">
                            <model-viewer id="multi-edit-step-1" src="2" alt="Edited CAD model after prompt 1" camera-controls camera-orbit="60deg 60deg 5m"
                                style="width: 100%; height: 160px; background: #FFFFFF;">
                            </model-viewer>
                            <p class="edit-caption">Edited model after prompt 1</p>
                        </div>
                        <div class="flow-arrow" aria-hidden="true">→</div>
                        <div class="edit-step">
                            <model-viewer id="multi-edit-step-2" src="3" alt="Edited CAD model after prompt 2" camera-controls camera-orbit="60deg 60deg 5m"
                                style="width: 100%; height: 160px; background: #FFFFFF;">
                            </model-viewer>
                            <p class="edit-caption">Edited model after prompt 2</p>
                        </div>
                    </div>
                </div>
            </section>

            <section id="gallery" class="section">
                <h2>Dataset examples (interactable)</h2>
                <div class="gallery-switcher">
                    <div class="gallery-tabs" role="tablist" aria-label="Additional edit gallery">
                        <button class="gallery-tab is-active" data-gallery="set1" role="tab" aria-selected="true">Example 1</button>
                        <button class="gallery-tab" data-gallery="set2" role="tab" aria-selected="false">Example 2</button>
                        <button class="gallery-tab" data-gallery="set3" role="tab" aria-selected="false">Example 3</button>
                        <button class="gallery-tab" data-gallery="set4" role="tab" aria-selected="false">Example 4</button>
                        <button class="gallery-tab" data-gallery="set5" role="tab" aria-selected="false">Example 5</button>
                    </div>

                    <div class="gallery-display">
                        <div class="gallery-model" aria-live="polite">
                            <model-viewer id="gallery-source" src="1" alt="Source CAD model" camera-controls camera-orbit="60deg 60deg 5m" 
                                style="width: 100%; height: 280px; background: #FFFFFF;">
                            </model-viewer>
                            <p class="gallery-caption">Source model</p>
                        </div>

                        <div class="gallery-prompt" id="gallery-prompt">
                            Prompt: Chamfer the front edge and add a recessed logo pocket.
                        </div>

                        <div class="gallery-model">
                            <model-viewer id="gallery-result" src="1" alt="Edited CAD model" camera-controls camera-orbit="60deg 60deg 5m" 
                                style="width: 100%; height: 280px; background: #FFFFFF;">
                            </model-viewer>
                            <p class="gallery-caption">Edited result</p>
                        </div>
                    </div>
                </div>
                <p class="interactive-note">Requires network access to load the Google <code>model-viewer</code> library.</p>
            </section>

            <section id="gallery-six" class="section">
                <h2>Edit examples (interactable)</h2>
                <div class="gallery-switcher">
                    <div class="gallery-tabs" role="tablist" aria-label="Extended edit gallery">
                        <button class="gallery-tab-six is-active" data-gallery-six="setA" role="tab" aria-selected="true">Example 1</button>
                        <button class="gallery-tab-six" data-gallery-six="setB" role="tab" aria-selected="false">Example 2</button>
                        <button class="gallery-tab-six" data-gallery-six="setC" role="tab" aria-selected="false">Example 3</button>
                        <button class="gallery-tab-six" data-gallery-six="setD" role="tab" aria-selected="false">Example 4</button>
                        <button class="gallery-tab-six" data-gallery-six="setE" role="tab" aria-selected="false">Example 5</button>
                        <button class="gallery-tab-six" data-gallery-six="setF" role="tab" aria-selected="false">Example 6</button>
                    </div>

                    <div class="gallery-display">
                        <div class="gallery-model" aria-live="polite">
                            <model-viewer id="gallery-six-source" src="1" alt="Source CAD model" camera-controls camera-orbit="60deg 60deg 5m" 
                                style="width: 100%; height: 280px; background: #FFFFFF;">
                            </model-viewer>
                            <p class="gallery-caption">Source model</p>
                        </div>

                        <div class="gallery-prompt gallery-prompt-six" id="gallery-six-prompt">
                            Prompt: Mill the outer rim and add two counterbored holes on the top face.
                        </div>

                        <div class="gallery-model">
                            <model-viewer id="gallery-six-result" src="1" alt="Edited CAD model" camera-controls camera-orbit="60deg 60deg 5m" 
                                style="width: 100%; height: 280px; background: #FFFFFF;">
                            </model-viewer>
                            <p class="gallery-caption">Edited result</p>
                        </div>
                    </div>
                </div>
                <p class="interactive-note">Requires network access to load the Google <code>model-viewer</code> library.</p>
            </section>
            
            <section class="section repeat-note">
                <p class="section-note">Results below are repeated from the paper for completeness and convenient reference.</p>
            </section>

            <section id="results" class="section">
                <h2>Comparison and results</h2>
                <div class="method-figure">
                    <img src="assets/comparison.jpg" alt="">
                    <p class="teaser-caption">
                        Figure 4: <strong>Top left: </strong> Randomly selected comparison samples from CAD-Editor testset. <strong>Top right: </strong>
                        Challenging comparison samples from CAD-Editor testset. <strong>Bottom: </strong> Challenging samples from our BrepEDIT-240K testset.
                    </p>
                </div>
            </section>

            <section id="results" class="section">
                <h2>More dataset samples 1</h2>
                <div class="method-figure">
                    <img src="assets/dataset_more_Page_1.jpg" alt="">
                    <p class="teaser-caption">
                        Figure 5: More samples from our BrepEDIT-240K dataset.
                    </p>
                </div>
            </section>
            <section id="results" class="section">
                <h2>More dataset samples 2</h2>
                <div class="method-figure">
                    <img src="assets/dataset_more_Page_2.jpg" alt="">
                    <p class="teaser-caption">
                        Figure 6: More samples from our BrepEDIT-240K dataset.
                    </p>
                </div>
            </section>

            <section id="results" class="section">
                <h2>More comparison</h2>
                <div class="method-figure">
                    <img src="assets/cadeditor_more1.jpg" alt="">
                    <p class="teaser-caption">
                        Figure 7: More comparison samples between our B-repLer and CAD-Editor.
                    </p>
                </div>
            </section>

            <section id="results" class="section">
                <h2>More results 1</h2>
                <div class="method-figure">
                    <img src="assets/results_more_Page_1.jpg" alt="">
                    <p class="teaser-caption">
                        Figure 8: More results from our B-repLer method.
                    </p>
                </div>
            </section>
            <section id="results" class="section">
                <h2>More results 2</h2>
                <div class="method-figure">
                    <img src="assets/results_more_Page_2.jpg" alt="">
                    <p class="teaser-caption">
                        Figure 9: More results from our B-repLer method.
                    </p>
                </div>
            </section>
            <section id="results" class="section">
                <h2>More results 3</h2>
                <div class="method-figure">
                    <img src="assets/results_more_Page_3.jpg" alt="">
                    <p class="teaser-caption">
                        Figure 10: More results from our B-repLer method.
                    </p>
                </div>
            </section>
        </main>
    </div>

    <script>
        // Load multi-edit models (first page)
        document.getElementById('multi-edit-initial').src = "assets/model1.glb";
        document.getElementById('multi-edit-step-1').src = "assets/model2.glb";
        document.getElementById('multi-edit-step-2').src = "assets/model3.glb";

        const gallerySets = {
            set1: {
                source: "assets/a11.glb",
                result: "assets/a12.glb",
                prompt: "Prompt: Incorporate an alignment wall to precisely locate and secure a mating component within the assembly"
            },
            set2: {
                source: "assets/a21.glb",
                result: "assets/a22.glb",
                prompt: "Prompt: Add the container body to calculate and verify its internal fluid volume"
            },
            set3: {
                source: "assets/a31.glb",
                result: "assets/a32.glb",
                prompt: "Prompt: Add a slot to secure the component within its assembly using a retaining clip"
            },
            set4: {
                source: "assets/a41.glb",
                result: "assets/a42.glb",
                prompt: "Prompt: Introduce an ergonomic grip to allow a user to manually pull, push, or carry the larger assembly to which this component is attached"
            },
            set5: {
                source: "assets/a51.glb",
                result: "assets/a52.glb",
                prompt: "Prompt: Add a snap-fit fastening feature to a simple disc, enabling it to function as a push-in rivet for securing a component or panel to a structural frame without separate hardware"
            }
        };

        const galleryTabs = document.querySelectorAll('.gallery-tab');
        const sourceViewer = document.getElementById('gallery-source');
        const resultViewer = document.getElementById('gallery-result');
        const promptBlock = document.getElementById('gallery-prompt');
        const loadedGallerySets = new Set(); // Track loaded sets

        const applyGallerySet = (key) => {
            const data = gallerySets[key];
            if (!data) {
                return;
            }

            // Only load models if not already loaded
            if (!loadedGallerySets.has(key)) {
                sourceViewer.src = data.source;
                resultViewer.src = data.result;
                loadedGallerySets.add(key);
            } else {
                // Just switch to already loaded models
                sourceViewer.src = data.source;
                resultViewer.src = data.result;
            }
            promptBlock.textContent = data.prompt;
        };

        // Load only the first gallery set on page load
        applyGallerySet('set1');

        galleryTabs.forEach((tab) => {
            tab.addEventListener('click', () => {
                const key = tab.dataset.gallery;
                applyGallerySet(key);

                galleryTabs.forEach((otherTab) => {
                    const isActive = otherTab === tab;
                    otherTab.classList.toggle('is-active', isActive);
                    otherTab.setAttribute('aria-selected', String(isActive));
                });
            });
        });

        const extendedGallerySets = {
            setA: {
                source: "assets/d11.glb",
                result: "assets/d12.glb",
                prompt: "Prompt: Remove the shoulder feature, simplifying the part's profile to a single-diameter dowel"
            },
            setB: {
                source: "assets/d21.glb",
                result: "assets/d22.glb",
                prompt: "Prompt: Cut an access window for servicing or viewing components behind the plate"
            },
            setC: {
                source: "assets/d31.glb",
                result: "assets/d32.glb",
                prompt: "Prompt: Convert the closed, rectangular-profile bracket into an open-ended U-shaped channel"
            },
            setD: {
                source: "assets/d41.glb",
                result: "assets/d42.glb",
                prompt: "Prompt: Lighten the component for weight-sensitive designs and reduce material usage"
            },
            setE: {
                source: "assets/d51.glb",
                result: "assets/d52.glb",
                prompt: "Prompt: Incorporate a seat to install a bearing for a rotating assembly element"
            },
            setF: {
                source: "assets/d61.glb",
                result: "assets/d62.glb",
                prompt: "Prompt: Add a pilot feature (the smaller top cylinder) to guide a mating part during assembly, ensuring correct alignment before it engages with the larger diameter base"
            }
        };

        const extendedTabs = document.querySelectorAll('.gallery-tab-six');
        const extendedSourceViewer = document.getElementById('gallery-six-source');
        const extendedResultViewer = document.getElementById('gallery-six-result');
        const extendedPromptBlock = document.getElementById('gallery-six-prompt');
        const loadedExtendedSets = new Set(); // Track loaded sets

        const applyExtendedGallerySet = (key) => {
            const data = extendedGallerySets[key];
            if (!data) {
                return;
            }

            // Only load models if not already loaded
            if (!loadedExtendedSets.has(key)) {
                extendedSourceViewer.src = data.source;
                extendedResultViewer.src = data.result;
                loadedExtendedSets.add(key);
            } else {
                // Just switch to already loaded models
                extendedSourceViewer.src = data.source;
                extendedResultViewer.src = data.result;
            }
            extendedPromptBlock.textContent = data.prompt;
        };

        // Load only the first extended gallery set on page load
        applyExtendedGallerySet('setA');

        extendedTabs.forEach((tab) => {
            tab.addEventListener('click', () => {
                const key = tab.dataset.gallerySix;
                applyExtendedGallerySet(key);

                extendedTabs.forEach((otherTab) => {
                    const isActive = otherTab === tab;
                    otherTab.classList.toggle('is-active', isActive);
                    otherTab.setAttribute('aria-selected', String(isActive));
                });
            });
        });
    </script>

</body>

</html>